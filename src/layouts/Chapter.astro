---
const { frontmatter } = Astro.props;
import { getCollection } from 'astro:content';
const chapters = await getCollection(frontmatter.book);

---

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="Content-Type" 
      content="text/html; charset=utf-8">
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{frontmatter.title}</title>
	</head>
	<body>
<div class="header">
{
chapters.map(a => (<div class="chapter-num"><a href={`/${frontmatter.book}/${a.slug}`}>{a.data.chapternum}</a></div>))
}
</div>
<div class="content">
	{frontmatter.layout}
	<slot />
</div>
<div id="paratext-viewer">
</div>
<div class="controls">
	{frontmatter.next && <a class="navprev" href={`/${frontmatter.book}/${frontmatter.next}`}>next</a>}
	<div class="audiobtn">
		{frontmatter.audio && <button onclick=`{playAudio('${frontmatter.audio}');}`>Play</button>
	</div> }
	{frontmatter.prev && <a class="navnext" href={`/${frontmatter.book}/${frontmatter.prev}`}>prev</a>}
</div>
<style >
	:root {
		--accent: 124, 58, 237;
		--accent-gradient: linear-gradient(45deg, rgb(var(--accent)), #da62c4 30%, white 60%);
	}
	html {
		font-family: system-ui, sans-serif;
		background-color: #F6F6F6;
	}
	.content {
		margin-left:auto;
		margin-right:auto;
		padding-left:auto;
		padding-right:auto;
		width:50%;
	}
	.header {
		display: flex;
		align-items; center;
		justify-content: center;
	}
	.header > div {margin-left:1em; margin-right:1em;}
	.controls {
		background-color: rgb(107, 0, 0);
		color:white;
	}
	.controls {
		display: flex;
		align-items: center;
		justify-content: center;
		margin-right:auto;
		margin-left:auto;
		width:50%;
		grid-template-columns: 25% 25% 25%;
	}
	.controls > a, button {
		display: inline-block;	
	}

	.audiobtn {
	}
	.navprev {
	color: white;
	}
	.navnext{
	color: white;
	}
	}
	code {
		font-family: Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono,
			Bitstream Vera Sans Mono, Courier New, monospace;
	}
</style>
<script is:inline>
const para = document.getElementById('paratext-viewer');
function showParatext(t) {
	para.innerHTML = t;
}
</script>

</body>
</html>
